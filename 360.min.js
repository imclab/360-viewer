(function(){var t,n,e,o,r,i,u,a,c,d,l,s,m,f,p,h,g=(window["360"]={},[].slice);p=function(t,n){return setTimeout(n,1e3*t)},i=function(t){return t-Math.floor(t)},c=function(t){return setTimeout(t,0)},a=function(t){return t},d=function(){return void 0},s=function(t){return function(){var n;return n=1<=arguments.length?g.call(arguments,0):[],t?(t.apply(null,n),t=void 0):void 0}},r=function(){var t,n,e,o,r,i,u;for(o=arguments[0],e=2<=arguments.length?g.call(arguments,1):[],i=0,u=e.length;u>i;i++){n=e[i];for(t in n)r=n[t],o[t]=r}return o},t=function(t,n,e){var o,r,i,u,a;for(e=s(e),i=t.length,r=function(t){return t&&e(t),--i?void 0:e()},u=0,a=t.length;a>u;u++)o=t[u],n(o,r);return void 0},null==Date.now&&(Date.now=function(){return+new Date}),n=document.getElementsByTagName("body")[0],l=function(t){var n;return(n=function(){return"interactive"===document.readyState||"complete"===document.readyState?t():setTimeout(n,10)})()},m=function(t,n){var e,o,r;for(o in n){r=n[o];try{t.style[o]=r}catch(i){e=i}}return t},o=function(t,n,e){return t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent("on"+n,e)},u=function(t,n){var e;return e=new XMLHttpRequest,e.onload=function(){return n(null,e.responseText)},e.open("get",t,!0),e.send()},e=function(n,e){var o;return o=function(t,n){var e;return e=new Image,e.src=t,e.onload=function(){return n()}},t(n,o,e)},h=void 0,f=void 0,function(){var t,n,e,r,i,u,a,c,l;return c=void 0,f=function(t){return c=t},a=500,u=100,l=function(t,n){var e,o;return e=n.clientX,o=n.clientY,t.event=n,t.ddx=e-t.x||0,t.ddy=o-t.y||0,t.dx=e-t.x0,t.dy=o-t.y0,t.maxDist2=t.dx*t.dx+t.dy*t.dy,t.time=Date.now()-t.startTime,t.x=e,t.y=o},r=function(t,n,e){var o;return c=e,c.handler=n,c.x0=t.clientX,c.y0=t.clientY,c.x=t.clientX,c.y=t.clientY,c.startTime=Date.now(),l(c,t),c.ctx=n.start(c),o=function(){return c&&!c.holding&&c.maxDist2<u?(c.holding=!0,c.handler.hold(c)):void 0},setTimeout(o,a)},e=function(t){return l(c,t),c.ctx=c.handler.move(c||c.ctx)},i=function(){return c.handler.end(c),c.maxDist2<u&&c.time<a&&c.handler.click(c),c=void 0},t=function(t){return function(n){var e;return c?("function"==typeof n.preventDefault&&n.preventDefault(),t((null!=(e=n.touches)?e[0]:void 0)||n)):void 0}},n=s(function(){return o(document,"mousemove",t(e)),o(document,"touchmove",t(e)),o(document,"mouseup",t(i)),o(document,"touchend",t(i))}),h=function(t){return o(t.elem,"mousedown",function(n){return"function"==typeof n.preventDefault&&n.preventDefault(),r(n,t,{isMouse:!0})}),o(t.elem,"touchstart",function(n){return"function"==typeof n.preventDefault&&n.preventDefault(),r(n.touches[0],t,{})}),n(),t.start||(t.start=d),t.move||(t.move=d),t.end||(t.end=d),t.drag||(t.drag=d),t.click||(t.click=d),t.hold||(t.hold=d),t}}(),function(){var t,o,u,a,s,g,v;return t=0,v=void 0,s=void 0,g=200,u=void 0,a=!0,o={autorotate:!0,imageURLs:void 0},l(function(){var t;return n=document.getElementsByTagName("body")[0],t=document.createElement("div"),m(t,{position:"absolute",overflow:"hidden",width:g+"px",height:g+"px",border:"0px solid black",cursor:"default",backgroundColor:"rgba(100,100,100,0.8)",borderRadius:g/2+"px",boxShadow:"0px 0px 40px 0px rgba(255,255,255,.7) inset, 4px 4px 9px 0px rgba(0,0,0,0.5)",display:"none"}),t.id="zoomLens360",n.appendChild(t)}),window.onetwo360=function(l){var x,w,y,b,k,L,T,z,E,M,R,D,I,U,_,C,q,P,S;return b=0,P=void 0,M=void 0,k=void 0,T=void 0,U=void 0,L=document.getElementById(l.elem_id),y=document.createElement("div"),m(y,{display:"inline-block",position:"relative"}),R=new Image,u=h({elem:L}),L.appendChild(y),y.appendChild(R),R.src="spinner.gif",m(R,{position:"absolute",top:"49%",left:"49%"}),_=function(){var t,n,e,o,r;return m(R,{top:"0px",left:"0px"}),"undefined"!=typeof spinnerElem&&null!==spinnerElem&&spinnerElem.remove(),o=l.request_width,e=l.request_height,U=document.createElement("i"),U.className="icon-OneTwo360Logo",y.appendChild(U),m(U,{position:"absolute",top:.35*e+"px",left:.25*o+"px",opacity:"0.7",textShadow:"0px 0px 5px white",fontSize:.2*e+"px",color:"#333",transition:"opacity 1s"}),U.onmouseover=function(){return U.style.opacity="0"},t=function(t){return m(t,{position:"absolute",color:"#333",opacity:"0.7",textShadow:"0px 0px 5px white",backgroundColor:"rgba(255,255,255,0)",fontSize:.08*e+"px",padding:.02*e+"px"}),t},n=document.createElement("i"),n.className="fa fa-fullscreen",n.ontouchstart=n.onmousedown=C,y.appendChild(n),m(t(n),{top:.85*e+"px",left:o-.15*e+"px"}),r=document.createElement("i"),r.className="fa fa-search",y.appendChild(r),m(t(r),{top:.85*e+"px",left:"0px"})},c(function(){return E()}),E=function(){var n,e;return n="callback"+ ++t,window[n]=function(t){var i,u;return console.log(t),u={imageURLs:function(){var n,e,o,r;for(o=t.files,r=[],n=0,e=o.length;e>n;n++)i=o[n],r.push(t.baseUrl+i.normal);return r}(),zoomURLs:function(){var n,e,o,r;for(o=t.files,r=[],n=0,e=o.length;e>n;n++)i=o[n],r.push(t.baseUrl+i.zoom);return r}(),request_width:t.width,request_height:t.width},v=t.zoomWidth,s=t.zoomHeight,l=r({},o,u,l),I(),e.remove(),m(L,{display:"inline-block",width:t.width+"px",height:t.height+"px",overflow:"hidden"}),m(y,{width:t.width+"px",height:t.height+"px"}),delete window[n]},e=document.createElement("script"),e.src="http://embed.onetwo360.com/"+l.product_id+"?callback="+n,document.getElementsByTagName("head")[0].appendChild(e)},I=function(){return w(function(){return m(R,{width:l.request_width+"px",height:l.request_height+"px",cursor:"url(res/cursor_rotate.cur),move"}),P=l.request_width,M=l.request_height,_(),D(),l.autorotate?x(d):void 0})},w=function(t){return e(l.imageURLs,t)},x=function(t){var n;return a=!0,b=0,(n=function(){return a&&b<2*Math.PI?(b+=.2,q(),setTimeout(n,60)):t()})()},q=function(){var t;return R.src=l.imageURLs[i(b/Math.PI/2)*l.imageURLs.length|0],t=R.src,z?p(.5,function(){var n;return n=new Image,n.onload=function(){return console.log("here",t,R.src),t===R.src&&(R.src=n.src),w(d)},n.src=l.zoomURLs[i(b/Math.PI/2)*l.imageURLs.length|0]}):void 0},D=function(){return u.move=function(t){return t.holding||t.zoom360?c(function(){return k(t)}):(b-=2*Math.PI*t.ddx/P,q())},u.hold=function(t){return c(function(){return k(t)})},u.start=function(){return m(U,{opacity:"0"}),a=!1},u.end=function(t){return c(function(){return T(t)})},u.click=function(t){return t.isMouse?(t.zoom360=!0,c(function(){return f(t)})):void 0}},S=void 0,k=function(t){var e,o,r,u,a,c,d,f,p,h,x,w,y,L,T,z,E,M,D;return M=document.getElementById("zoomLens360"),void 0===S&&(w=l.imageURLs[i(b/Math.PI/2)*l.zoomURLs.length|0],c=l.zoomURLs[i(b/Math.PI/2)*l.zoomURLs.length|0],S=w,d=new Image,d.onload=function(){return S===w?(S=c,k(t)):void 0},d.src=c),u=R.getBoundingClientRect(),x=u.top,p=u.bottom,h=u.left,f=u.right,a=f-h,r=p-x,y=.5,L=t.isMouse?.5:1.1,z=Math.min(p,Math.max(x,t.y)),T=Math.min(f,Math.max(h,t.x)),E=T+n.scrollLeft-g*y,D=z+n.scrollTop-g*L,e=g*y-(T-u.left)*v/a,o=g*L-(z-u.top)*s/r,m(M,{display:"block",position:"absolute",left:E+"px",top:D+"px",backgroundImage:"url("+S+")",backgroundSize:""+v+"px "+s+"px",backgroundPosition:""+e+"px "+o+"px",backgroundRepeat:"no-repeat"})},T=function(){return S=void 0,R.style.cursor="url(res/cursor_rotate.cur),move",document.getElementById("zoomLens360").style.display="none",w(d)},z=void 0,C=function(t){var n,e,o,r,i;return e=Math.min(window.innerWidth/P,window.innerHeight/M),t.preventDefault(),t.stopPropagation(),z?(m(L,z),z=void 0):(r=L.style,z={position:r.position,top:r.top,left:r.top,zoom:r.zoom,transform:r.transform,webkitTransform:r.webkitTransform,transformOrigin:r.transformOrigin,webkitTransformOrigin:r.webkitTransformOrigin,margin:r.margin,padding:r.padding},o="scale("+e+", "+e+")",i=(window.innerWidth/(e*P)-1)/2*P,n=(window.innerHeight/(e*M)-1)/2*M,m(L,{margin:"0",padding:""+n+"px "+i+"px "+n+"px "+i+"px",position:"fixed",top:"0px",left:"0px"}),""===r.transform||""===r.webkitTransform?m(L,{transform:o,webkitTransform:o,transformOrigin:"0 0",webkitTransformOrigin:"0 0"}):L.style.zoom=e),q(),!1}}}()}).call(this);
