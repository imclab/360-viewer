(function(){var t,e,o,i,n,r,s,h,u,l,a,d,c,f,m,p,y=[].slice;d=void 0,c=void 0,function(){var t,e,o,n,r,s;return e=Math.random(),n="/api/log",t=[],o=!1,r=200,s=400,c=function(){var r,h;if(!o){try{h=JSON.stringify(t)}catch(u){r=u,h="Error stringifying log"}return o=t,t=[],i(n,h,function(i){return setTimeout(function(){return o=!1},s),i?(d("logsync error",i),t=o.concat(t)):(t.push([+new Date,"log sync'ed",e]),a&&t.length>1?c():void 0)})}},d=function(){var e;return e=1<=arguments.length?y.call(arguments,0):[],t.push([+new Date].concat(y.call(e))),t.length>r||a?c():void 0},setTimeout(function(){return h(window,"error",function(){return d("window.onerror","undefined"!=typeof err&&null!==err?err.message:void 0)}),h(window,"beforeunload",function(){var e;d("window.beforeunload");try{i(n,JSON.stringify(t))}catch(o){e=o}return void 0})},0),d("starting",e,window.performance)}(),null==Object.keys&&(Object.keys=function(t){var e,o,i;i=[];for(e in t)o=t[e],i.push(e);return i}),o=XMLHttpRequest,a=!1,"boolean"!=typeof(new o).withCredentials&&(a=!0,o=XDomainRequest),i=function(t,e,i){var n;return n=new o,n.onerror=function(t){return"function"==typeof i?i(t||!0):void 0},n.onload=function(){return"function"==typeof i?i(null,n.responseText):void 0},n.open(e?"POST":"GET",t,!!i),n.send(e),i?void 0:n.responseText},u=function(t,e){var o,i;for(o in e)i=e[o],t[o]=i;return t},r=function(t){var e,o,i,n,s,h;if("object"==typeof t){if(t.constructor===Array)for(i=[],s=0,h=t.length;h>s;s++)e=t[s],i.push(r(e));else{i={};for(o in t)n=t[o],i[o]=r(n)}return i}return t},h=function(t,e,o){return t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent("on"+e,o)},s={frames:{current:0,normal:{width:void 0,height:void 0,urls:[]},zoom:{width:void 0,height:void 0,urls:[]}},spinOnLoadFPS:30,fullscreen:!1,zoom:{lensSize:200,enabled:!1,x:void 0,y:void 0},domElem:{width:void 0,height:void 0,domId:void 0}},e=function(t,e){var o,i,n,r,s,h,l,d,c;for(this.model=t,i=document.getElementById(e),this.defaultWidth=t.width||i.offsetWidth,this.defaultHeight=t.height||i.offsetHeight,this.style={root:{display:"inline-block",cursor:"url(res/cursor_rotate.cur),move"},image:{width:"100%",height:"100%"},zoomLens:{display:"block",position:"absolute",overflow:"hidden",width:this.model.zoom.lensSize,height:this.model.zoom.lensSize,border:"0px solid black",cursor:"default",backgroundColor:a?void 0:"rgba(100,100,100,0.8)",borderRadius:this.model.zoom.lensSize/2,boxShadow:"0px 0px 40px 0px rgba(255,255,255,.7) inset, 4px 4px 9px 0px rgba(0,0,0,0.5)",backgroundRepeat:"no-repeat"},logo:{position:"absolute",opacity:"0.7",textShadow:"0px 0px 5px white",color:"#333",transition:"opacity 1s"},btnFull:{left:"90%"},btnZoom:{left:"5%"},spinner:{position:"absolute",top:"49%",left:"49%"}},o={position:"absolute",color:"#333",opacity:"0.7",textShadow:"0px 0px 5px white",backgroundColor:a?void 0:"rgba(255,255,255,0)",top:"80%",fontSize:.08*this.defaultHeight,padding:.02*this.defaultHeight},u(this.style.btnFull,o),u(this.style.btnZoom,o),this.elems={},this.elems.root=document.createElement("div"),this.elems.root.innerHTML='<img><div class="onetwo360-zoom-lens"></div><i class="icon-OneTwo360Logo"></i><i class="fa fa-fullscreen onetwo360-fullscreen-button"></i><i class="fa fa-search onetwo360-fullscreen-button"></i><img src="spinner.gif">',i.appendChild(this.elems.root),n=Object.keys(this.style),r=l=1,d=n.length-1;d>=1?d>=l:l>=d;r=d>=1?++l:--l)this.elems[n[r]]=this.elems.root.childNodes[r-1];this.width=void 0,this.height=void 0,this.logoFade=void 0,this.imgSrc=void 0,this.elemStyle={},this.styleCache={},c=this.elems;for(s in c)h=c[s],this.elemStyle[s]=this.elems[s].style,this.styleCache[s]={};return this.update(),this},e.prototype.update=function(){var t;if(!this.updateReq)return this.updateReq=!0,t=this,setTimeout(function(){return t._update(),t.updateReq=!1},0)},e.prototype._update=function(){return this._fullscreen(),this._root(),this._logo(),this._zoomLens(),this._image(),this._applyStyle(),d("View#_update'd")},e.prototype._fullscreen=function(){return this.model.fullscreen?u(this.style.root,{position:"absolute",top:0,left:0,width:this.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:this.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}):u(this.style.root,{position:"relative",top:0,left:0,width:this.width=this.defaultWidth,height:this.height=this.defaultHeight})},e.prototype._root=function(){return void 0},e.prototype._logo=function(){return{top:.35*this.height+"px",left:.25*this.width+"px",fontSize:.2*this.height+"px"}},e.prototype._zoomLens=function(){var t,e;return this.model.zoom.enabled?(t=this.model.frames.current,e=this.model.frames.zoom,u(this.style.zoomLens,{display:"block",left:123,top:123,backgroundImage:"url("+e.urls[t]+")",backgroundSize:""+e.width+"px "+e.height+"px",backgroundPosition:"123px 123px"})):u(this.style.zoomLens,{display:"none"})},e.prototype._image=function(){var t;return t=this.model.frames.normal.urls[this.model.frames.current],void 0!==t&&t!==this.imgSrc?(this.elems.image.src=t,this.imgSrc=t):void 0},e.prototype._applyStyle=function(){var t,e,o,i,n,r;n=this.style,r=[];for(e in n)t=n[e],r.push(function(){var n;n=[];for(o in t)i=t[o],this.styleCache[e][o]!==i?("number"==typeof i&&(i+="px"),this.elemStyle[e][o]=i,n.push(this.styleCache[e][o]=i)):n.push(void 0);return n}.call(this));return r},n=function(t,e){var o,i,n,r,s,h;for(t.loaded=[],o=0,d("caching frameset",t.urls[0]),h=[],i=r=0,s=t.urls.length-1;s>=0?s>=r:r>=s;i=s>=0?++r:--r)n=new Image,n.onload=function(i){return function(){return t.loaded[i]=+new Date,++o===t.urls.length?(d("done caching frameset",t.urls[0]),"function"==typeof e?e():void 0):void 0}}(i),h.push(n.src=t.urls[i]);return h},l=function(t,e,o){var i,r,s,h,u;return u=+new Date,h=void 0,s=0,i=!1,t.frames.current=0,r=function(){var o,i,n,l,a;for(o=0,l=u;t.frames.normal.loaded[o];)l=Math.max(t.frames.normal.loaded[o],l),++o;if(o>t.frames.current+1&&(a=+new Date,null==h&&(h=a),n=(l-u)/o,i=Math.max(n,1e3/t.spinOnLoadFPS),a>h+i)){for(;a>h+i;)s=t.frames.current=Math.min(o-1,t.frames.current+1),h+=i;h=a,d("incremental load animation",s),e.update()}return t.frames.current===s&&t.frames.current<t.frames.normal.urls.length-1?setTimeout(r,0):d("finished incremental load animation")},t.spinOnLoadFPS?(n(t.frames.normal),d("starting incremental load animation"),r()):n(t.frames.normal(o))},f=+new Date,p=500,m=100,t=function(t){var e,o;return o=this,e=function(t){return function(e){var i;return o.touching?(d("here"),"function"==typeof e.preventDefault&&e.preventDefault(),t.call(o,(null!=(i=e.touches)?i[0]:void 0)||e)):void 0}},h(document,"mousemove",e(this._move)),h(document,"touchmove",e(this._move)),h(document,"mouseup",e(this._end)),h(document,"touchend",e(this._end)),h(t,"mousedown",function(t){return"function"==typeof t.preventDefault&&t.preventDefault(),o._start(t)}),h(t,"touchstart",function(t){return"function"==typeof t.preventDefault&&t.preventDefault(),o._start(t.touches[0])}),this._reset(),this},t.prototype._reset=function(){return this.touching=!1,this.holding=!1,this.startTime=+new Date,this.maxDist2=0},t.prototype._update=function(t){var e,o;return e=this.x,o=this.y,this.x=t.clientX,this.y=t.clientY,this.dx=this.x-this.x0||0,this.dy=this.y-this.y0||0,this.ddx=this.x-e||0,this.ddy=this.y-o||0,this.maxDist2=Math.max(this.maxDist2,this.dx*this.dx+this.dy*this.dy),this.time=+new Date-this.startTime},t.prototype._start=function(t){var e;return this._reset(),this.touching=!0,this.isMouse=!t.touches,this.isMouse||(t=t.touches[0]),this.x0=this.x=t.clientX,this.y0=this.y=t.clientY,"function"==typeof this.onstart&&this.onstart(),this._update(t),e=this,setTimeout(function(){return e._holdTimeout()},p)},t.prototype._holdTimeout=function(){return this.touching&&!this.holding&&this.maxDist2<m?(this.holding=!0,"function"==typeof this.onhold?this.onhold():void 0):void 0},t.prototype._move=function(t){return this._update(t),"function"==typeof this.onmove?this.onmove():void 0},t.prototype._end=function(t){return this._update(t),"function"==typeof this.onend&&this.onend(),this.maxDist2<m&&this.time<p&&"function"==typeof this.onclick&&this.onclick(),this._reset()},window.onetwo360=function(){return void console.log("HJERE")}}).call(this);