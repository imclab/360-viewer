(function(){var t,e,o,i,s,n,l;null==Object.keys&&(Object.keys=function(t){var e,o,i;i=[];for(e in t)o=t[e],i.push(e);return i}),e=XMLHttpRequest,l=!1,"boolean"!=typeof(new e).withCredentials&&(l=!0,e=XDomainRequest),o=function(t,o,i){var s;return s=new e,s.onload=function(){return"function"==typeof i?i(200===s.status?null:s.status,s.responseText):void 0},s.open(o?"POST":"GET",t,!!i),s.send(o),i?void 0:s.responseText},n=function(t,e){var o,i;for(o in e)i=e[o],t[o]=i;return t},i=function(t){var e,o,s,n,l,r;if("object"==typeof t){if(t.constructor===Array)for(s=[],l=0,r=t.length;r>l;l++)e=t[l],s.push(i(e));else{s={};for(o in t)n=t[o],s[o]=i(n)}return s}return t},s={frames:{current:0,normal:{width:void 0,height:void 0,urls:[]},zoom:{width:void 0,height:void 0,urls:[]}},fullscreen:!1,zoom:{lensSize:200,enabled:!1,x:void 0,y:void 0},domElem:{width:void 0,height:void 0,domId:void 0}},t=function(t,e){var o,i,s,r,h,d,u,a,p;for(this.model=t,i=document.getElementById(e),this.defaultWidth=t.width||i.offsetWidth,this.defaultHeight=t.height||i.offsetHeight,this.style={root:{display:"inline-block",cursor:"url(res/cursor_rotate.cur),move"},zoomLens:{display:"block",position:"absolute",overflow:"hidden",width:this.model.zoom.lensSize,height:this.model.zoom.lensSize,border:"0px solid black",cursor:"default",backgroundColor:l?void 0:"rgba(100,100,100,0.8)",borderRadius:this.model.zoom.lensSize/2,boxShadow:"0px 0px 40px 0px rgba(255,255,255,.7) inset, 4px 4px 9px 0px rgba(0,0,0,0.5)",backgroundRepeat:"no-repeat"},logo:{position:"absolute",opacity:"0.7",textShadow:"0px 0px 5px white",color:"#333",transition:"opacity 1s"},btnFull:{left:"90%"},btnZoom:{left:"5%"},spinner:{position:"absolute",top:"49%",left:"49%"}},o={position:"absolute",color:"#333",opacity:"0.7",textShadow:"0px 0px 5px white",backgroundColor:l?void 0:"rgba(255,255,255,0)",top:"80%",fontSize:.08*this.defaultHeight,padding:.02*this.defaultHeight},n(this.style.btnFull,o),n(this.style.btnZoom,o),this.elems={},this.elems.root=document.createElement("div"),this.elems.root.innerHTML='<div class="onetwo360-zoom-lens"></div><i class="icon-OneTwo360Logo"></i><i class="fa fa-fullscreen onetwo360-fullscreen-button"></i><i class="fa fa-search onetwo360-fullscreen-button"></i><img src="spinner.gif">',i.appendChild(this.elems.root),s=Object.keys(this.style),r=u=1,a=s.length-1;a>=1?a>=u:u>=a;r=a>=1?++u:--u)this.elems[s[r]]=this.elems.root.childNodes[r-1];this.width=void 0,this.height=void 0,this.logoFade=void 0,this.elemStyle={},this.styleCache={},p=this.elems;for(h in p)d=p[h],this.elemStyle[h]=this.elems[h].style,this.styleCache[h]={};return this.update()},t.prototype.update=function(){return this._fullscreen(),this._root(),this._logo(),this._zoomLens(),this._applyStyle()},t.prototype._fullscreen=function(){return this.model.fullscreen?n(this.style.root,{position:"absolute",top:0,left:0,width:this.width=window.innerWidth,height:this.height=window.innerHeight}):n(this.style.root,{position:"relative",top:0,left:0,width:this.width=this.defaultWidth,height:this.height=this.defaultHeight})},t.prototype._root=function(){return n(this.style.root,{backgroundImage:"url("+this.model.frames.normal.urls[this.model.frames.current]+")",backgroundSize:""+this.width+"px "+this.height+"px"})},t.prototype._logo=function(){return{top:.35*this.height+"px",left:.25*this.width+"px",fontSize:.2*this.height+"px"}},t.prototype._zoomLens=function(){var t,e;return this.model.zoom.enabled?(t=this.model.frames.current,e=this.model.frames.zoom,n(this.style.zoomLens,{display:"block",left:123,top:123,backgroundImage:"url("+e.urls[t]+")",backgroundSize:""+e.width+"px "+e.height+"px",backgroundPosition:"123px 123px"})):n(this.style.zoomLens,{display:"none"})},t.prototype._applyStyle=function(){var t,e,o,i,s,n;s=this.style,n=[];for(e in s)t=s[e],n.push(function(){var s;s=[];for(o in t)i=t[o],this.styleCache[e][o]!==i?("number"==typeof i&&(i+="px"),this.elemStyle[e][o]=i,s.push(this.styleCache[e][o]=i)):s.push(void 0);return s}.call(this));return n},window.onetwo360=function(){return void 0}}).call(this);