(function(){var t,e,o,i,n,s,r,l,h,a;null==Object.keys&&(Object.keys=function(t){var e,o,i;i=[];for(e in t)o=t[e],i.push(e);return i}),e=XMLHttpRequest,h=!1,"boolean"!=typeof(new e).withCredentials&&(h=!0,e=XDomainRequest),o=function(t,o,i){var n;return n=new e,n.onload=function(){return"function"==typeof i?i(200===n.status?null:n.status,n.responseText):void 0},n.open(o?"POST":"GET",t,!!i),n.send(o),i?void 0:n.responseText},r=function(t,e){var o,i;for(o in e)i=e[o],t[o]=i;return t},n=function(t){var e,o,i,s,r,l;if("object"==typeof t){if(t.constructor===Array)for(i=[],r=0,l=t.length;l>r;r++)e=t[r],i.push(n(e));else{i={};for(o in t)s=t[o],i[o]=n(s)}return i}return t},s={frames:{current:0,normal:{width:void 0,height:void 0,urls:[]},zoom:{width:void 0,height:void 0,urls:[]}},spinOnLoadFPS:50,fullscreen:!1,zoom:{lensSize:200,enabled:!1,x:void 0,y:void 0},domElem:{width:void 0,height:void 0,domId:void 0}},t=function(t,e){var o,i,n,s,l,a,u,d,c;for(this.model=t,i=document.getElementById(e),this.defaultWidth=t.width||i.offsetWidth,this.defaultHeight=t.height||i.offsetHeight,this.style={root:{display:"inline-block",cursor:"url(res/cursor_rotate.cur),move"},image:{width:"100%",height:"100%"},zoomLens:{display:"block",position:"absolute",overflow:"hidden",width:this.model.zoom.lensSize,height:this.model.zoom.lensSize,border:"0px solid black",cursor:"default",backgroundColor:h?void 0:"rgba(100,100,100,0.8)",borderRadius:this.model.zoom.lensSize/2,boxShadow:"0px 0px 40px 0px rgba(255,255,255,.7) inset, 4px 4px 9px 0px rgba(0,0,0,0.5)",backgroundRepeat:"no-repeat"},logo:{position:"absolute",opacity:"0.7",textShadow:"0px 0px 5px white",color:"#333",transition:"opacity 1s"},btnFull:{left:"90%"},btnZoom:{left:"5%"},spinner:{position:"absolute",top:"49%",left:"49%"}},o={position:"absolute",color:"#333",opacity:"0.7",textShadow:"0px 0px 5px white",backgroundColor:h?void 0:"rgba(255,255,255,0)",top:"80%",fontSize:.08*this.defaultHeight,padding:.02*this.defaultHeight},r(this.style.btnFull,o),r(this.style.btnZoom,o),this.elems={},this.elems.root=document.createElement("div"),this.elems.root.innerHTML='<img><div class="onetwo360-zoom-lens"></div><i class="icon-OneTwo360Logo"></i><i class="fa fa-fullscreen onetwo360-fullscreen-button"></i><i class="fa fa-search onetwo360-fullscreen-button"></i><img src="spinner.gif">',i.appendChild(this.elems.root),n=Object.keys(this.style),s=u=1,d=n.length-1;d>=1?d>=u:u>=d;s=d>=1?++u:--u)this.elems[n[s]]=this.elems.root.childNodes[s-1];this.width=void 0,this.height=void 0,this.logoFade=void 0,this.imgSrc=void 0,this.elemStyle={},this.styleCache={},c=this.elems;for(l in c)a=c[l],this.elemStyle[l]=this.elems[l].style,this.styleCache[l]={};return this.update(),this},t.prototype.update=function(){var t;if(!this.updateReq)return this.updateReq=!0,t=this,setTimeout(function(){return t._update(),t.updateReq=!1},0)},t.prototype._update=function(){return this._fullscreen(),this._root(),this._logo(),this._zoomLens(),this._image(),this._applyStyle()},t.prototype._fullscreen=function(){return this.model.fullscreen?r(this.style.root,{position:"absolute",top:0,left:0,width:this.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:this.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}):r(this.style.root,{position:"relative",top:0,left:0,width:this.width=this.defaultWidth,height:this.height=this.defaultHeight})},t.prototype._root=function(){return void 0},t.prototype._logo=function(){return{top:.35*this.height+"px",left:.25*this.width+"px",fontSize:.2*this.height+"px"}},t.prototype._zoomLens=function(){var t,e;return this.model.zoom.enabled?(t=this.model.frames.current,e=this.model.frames.zoom,r(this.style.zoomLens,{display:"block",left:123,top:123,backgroundImage:"url("+e.urls[t]+")",backgroundSize:""+e.width+"px "+e.height+"px",backgroundPosition:"123px 123px"})):r(this.style.zoomLens,{display:"none"})},t.prototype._image=function(){var t;return t=this.model.frames.normal.urls[this.model.frames.current],void 0!==t&&t!==this.imgSrc?(this.elems.image.src=t,this.imgSrc=t):void 0},t.prototype._applyStyle=function(){var t,e,o,i,n,s;n=this.style,s=[];for(e in n)t=n[e],s.push(function(){var n;n=[];for(o in t)i=t[o],this.styleCache[e][o]!==i?("number"==typeof i&&(i+="px"),this.elemStyle[e][o]=i,n.push(this.styleCache[e][o]=i)):n.push(void 0);return n}.call(this));return s},i=function(t,e){var o,i,n,s,r,l;for(t.loaded=[],o=0,l=[],i=s=0,r=t.urls.length-1;r>=0?r>=s:s>=r;i=r>=0?++s:--s)n=new Image,n.onload=function(i){return function(){return t.loaded[i]=+new Date,++o===t.urls.length?"function"==typeof e?e():void 0:void 0}}(i),l.push(n.src=t.urls[i]);return l},l=function(t,e,o){var n,s,r,l,h;return h=+new Date,l=void 0,r=0,n=!1,console.log(h-a),t.frames.current=0,s=function(){var i,n,a,u,d;for(i=0,u=h;t.frames.normal.loaded[i];)u=Math.max(t.frames.normal.loaded[i],u),++i;if(i>t.frames.current+1&&(d=+new Date,null==l&&(l=d),a=(u-h)/i,n=Math.max(a,1e3/t.spinOnLoadFPS),console.log(n,d-l),d>l+n)){for(;d>l+n;)r=t.frames.current=Math.min(i-1,t.frames.current+1),l+=n;l=d,e.update()}return t.frames.current===r&&t.frames.current<t.frames.normal.urls.length-1?setTimeout(s,0):o()},t.spinOnLoadFPS?(i(t.frames.normal,function(){return console.log("loaded "+(+new Date-a))}),s()):i(t.frames.normal(o))},a=+new Date,window.onetwo360=function(){return void 0}}).call(this);